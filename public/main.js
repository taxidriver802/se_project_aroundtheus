!function(){"use strict";class e{constructor(e,t,o){let{name:n,link:s}=e;this._name=n,this._link=s,this._cardSelector=t,this._handleImageClick=o}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._cardElement}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_toggleButtonState(e){const t=this._formElement.querySelector(this._submitButtonSelector);this._hasInvalidInput(e)?this.disableButton():(t.classList.remove(this._inactiveButtonClass),t.disabled=!1)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputEls)}))}))}disableButton(){const e=this._formElement.querySelector(this._submitButtonSelector);e.classList.add(this._inactiveButtonClass),e.disabled=!0}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e),e.value=""})),this.disableButton()}}class o{constructor(e,t,o,n){let{popupSelector:s}=e;this.popupElement=s,this._handleOverlay=t,this._removeListeners=o,this._editProfilePopup=n,this._handleEscClose=this._handleEscClose.bind(this),this._handleOverlayClick=this._handleOverlayClick.bind(this)}setEventListeners(){document.addEventListener("keydown",this._handleEscClose),document.addEventListener("click",this._handleOverlayClick)}open(){this.popupElement.classList.add("modal_opened"),this.setEventListeners()}close(){this.popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._handleOverlayClick)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlayClick(e){this._handleOverlay(e)}}class n extends o{constructor(e,t,o){let{popupSelector:n}=e;super({popupSelector:n},t,o),this._popupForm=document.querySelector(".js-modal-form")}close(){this._popupForm&&this._popupForm.reset(),super.close()}}const s=document.querySelector("#profile-edit-button"),i=document.querySelector("#profile-edit-modal"),r=document.querySelector("#profile-close-modal-button"),l=document.querySelector(".profile__title"),a=document.querySelector(".profile__description"),c=document.querySelector("#profile-title-input"),u=document.querySelector("#profile-description-input"),p=i.querySelector(".modal__form"),d=document.querySelector(".profile__add-button"),_=document.querySelector("#card-add-modal"),m=document.querySelector("#card-close-modal"),h=document.querySelector("#add-card-form"),E=_.querySelector(".modal__form"),f=E.querySelector(".modal__input_type_title"),S=E.querySelector(".modal__input_type_link"),v=document.querySelector("#popup-image"),y=document.querySelector(".cards__list"),k=document.querySelector(".modal__image"),L=document.querySelector(".modal__caption"),C={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit",inactiveButtonClass:"modal__submit_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},g=new t(C,E);g.enableValidation(),new t(C,p).enableValidation();const q=()=>{document.removeEventListener("click",T)},I=new class extends o{constructor(e,t,o){let{popupSelector:n}=e;super({popupSelector:n},t,o),this._popupSelector=n,this._handleOverlay=t}open(e){this._popupSelector.src,this._popupSelector.alt,this._popupSelector.alt,super.open(this._popupSelector)}}({popupSelector:v},T,q),b=new n({popupSelector:_},T,q),w=new n({popupSelector:i},T,q),B={profileTitle:l,profileDescription:a,profileTitleInput:c,profileDescriptionInput:u},j=[I,b,w],x=new class extends n{constructor(e,t,o,n){super(e),this._infoSelector=e,this._setUserInfo=t,this._editProfilePopup=o,this._popupInstances=n}getUserInfo(){return this._infoSelector.profileTitleInput.value=this._infoSelector.profileTitle.textContent,this._infoSelector.profileDescriptionInput.value=this._infoSelector.profileDescription.textContent,{title:this._infoSelector.profileTitle.textContent,description:this._infoSelector.profileDescription.textContent}}setUserInfo(e){e.preventDefault(),this._infoSelector.profileTitle.textContent=this._infoSelector.profileTitleInput.value,this._infoSelector.profileDescription.textContent=this._infoSelector.profileDescriptionInput.value,this._popupInstances.forEach((e=>{e.popupElement.classList.contains("modal_opened")&&e.close()}))}}(B,(()=>{}),w,j),D=e=>{let{name:t,link:o}=e;k.src=o,k.alt=t,L.textContent=t,setTimeout((()=>{I.open()}),10)};function T(e){j.forEach((t=>{const o=t.popupElement,n=o.querySelector(".js-modal-container");o.classList.contains("modal_opened")&&(n.contains(e.target)?e.stopPropagation():t.close())}))}function V(t){const o=function(t){return new e(t,"#card-template",D,T).getView()}(t);y.prepend(o)}[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}].forEach((e=>{V(e)})),s.addEventListener("click",(()=>{setTimeout((()=>{x.getUserInfo(),w.open()}),10)})),r.addEventListener("click",(()=>{w.close(i)})),p.addEventListener("submit",(function(e){x.setUserInfo(e)})),h.addEventListener("submit",(function(e){e.preventDefault(),V({name:f.value,link:S.value}),f.value="",S.value="",g.disableButton(),b.close(_)})),d.addEventListener("click",(()=>{setTimeout((()=>{b.open()}),10)})),m.addEventListener("click",(()=>b.close(_)))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIC8vIGdldCBjYXJkIHZpZXdcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICAvLyBjb25zdHNcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIC8vIHNldCBldmVudCBsaXN0ZW5lcnNcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgLy8gcmV0dXJuIHRoZSBjYXJkXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyAuY2FyZF9fbGlrZS1idXR0b25cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIC8vIC5jYXJkX19kZWxldGUtYnV0dG9uXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gaGFuZGxlIGltYWdlIGNsaWNrXHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29uKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0KSB7XHJcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRFbHMpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTsgLy8gQ2xlYXIgYWxsIGVycm9yIG1lc3NhZ2VzXHJcbiAgICAgIGlucHV0RWxlbWVudC52YWx1ZSA9IFwiXCI7IC8vIENsZWFyIGlucHV0IGZpZWxkc1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gUmVzZXQgYnV0dG9uIHN0YXRlXHJcbiAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBwb3B1cFNlbGVjdG9yIH0sXHJcbiAgICBoYW5kbGVPdmVybGF5LFxyXG4gICAgcmVtb3ZlTGlzdGVuZXJzLFxyXG4gICAgZWRpdFByb2ZpbGVQb3B1cFxyXG4gICkge1xyXG4gICAgdGhpcy5wb3B1cEVsZW1lbnQgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlT3ZlcmxheSA9IGhhbmRsZU92ZXJsYXk7XHJcbiAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMgPSByZW1vdmVMaXN0ZW5lcnM7XHJcbiAgICB0aGlzLl9lZGl0UHJvZmlsZVBvcHVwID0gZWRpdFByb2ZpbGVQb3B1cDtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2sgPSB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2suYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbGljayk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2spO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVPdmVybGF5Q2xpY2soZXZlbnQpIHtcclxuICAgIHRoaXMuX2hhbmRsZU92ZXJsYXkoZXZlbnQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0sIGhhbmRsZU92ZXJsYXksIHJlbW92ZUxpc3RlbmVycykge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0sIGhhbmRsZU92ZXJsYXksIHJlbW92ZUxpc3RlbmVycyk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLW1vZGFsLWZvcm1cIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIC8vIFJlc2V0IHRoZSBmb3JtIGJlZm9yZSBjbG9zaW5nXHJcbiAgICBpZiAodGhpcy5fcG9wdXBGb3JtKSB7XHJcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5jb25zdCBwcm9maWxlQWRkRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlQ2xvc2VNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1jbG9zZS1tb2RhbC1idXR0b25cIlxyXG4pO1xyXG5cclxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5cclxuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgY2FyZEFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZC1tb2RhbFwiKTtcclxuY29uc3QgY2FyZENsb3NlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtY2xvc2UtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1mb3JtXCIpO1xyXG5jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBjYXJkQWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuXHJcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfdGl0bGVcIlxyXG4pO1xyXG5jb25zdCBjYXJkTGlua0lucHV0ID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfbGlua1wiXHJcbik7XHJcbmNvbnN0IHBvcHVwSW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtaW1hZ2VcIik7XHJcbmNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbmNvbnN0IG1vZGFsSW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbmNvbnN0IHBvcHVwSW1hZ2VDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuXHJcbi8vLy8vL1xyXG5cclxuY29uc3QgY29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdF9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtRWxlbWVudCk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHJlbW92ZUxpc3RlbmVycyA9ICgpID0+IHtcclxuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlT3ZlcmxheSk7XHJcbn07XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFxyXG4gIHsgcG9wdXBTZWxlY3RvcjogcG9wdXBJbWFnZU1vZGFsIH0sXHJcbiAgaGFuZGxlT3ZlcmxheSxcclxuICByZW1vdmVMaXN0ZW5lcnNcclxuKTtcclxuXHJcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHsgcG9wdXBTZWxlY3RvcjogY2FyZEFkZE1vZGFsIH0sXHJcbiAgaGFuZGxlT3ZlcmxheSxcclxuICByZW1vdmVMaXN0ZW5lcnNcclxuKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7IHBvcHVwU2VsZWN0b3I6IHByb2ZpbGVFZGl0TW9kYWwgfSxcclxuICBoYW5kbGVPdmVybGF5LFxyXG4gIHJlbW92ZUxpc3RlbmVyc1xyXG4pO1xyXG5cclxuY29uc3QgaW5mb1NlbGVjdG9yID0ge1xyXG4gIHByb2ZpbGVUaXRsZSxcclxuICBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbn07XHJcblxyXG5jb25zdCBwb3B1cEluc3RhbmNlcyA9IFtpbWFnZVBvcHVwLCBuZXdDYXJkUG9wdXAsIGVkaXRQcm9maWxlUG9wdXBdO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXHJcbiAgaW5mb1NlbGVjdG9yLFxyXG4gICgpID0+IHt9LFxyXG4gIGVkaXRQcm9maWxlUG9wdXAsXHJcbiAgcG9wdXBJbnN0YW5jZXNcclxuKTtcclxuXHJcbmNvbnN0IGhhbmRsZUltYWdlQ2xpY2sgPSAoeyBuYW1lLCBsaW5rIH0pID0+IHtcclxuICBtb2RhbEltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xyXG4gIG1vZGFsSW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7XHJcbiAgcG9wdXBJbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG5cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGltYWdlUG9wdXAub3BlbigpO1xyXG4gIH0sIDEwKTtcclxufTtcclxuXHJcbmluaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkc0RhdGEpID0+IHtcclxuICBjcmVhdGVDYXJkKGNhcmRzRGF0YSk7XHJcbn0pO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU92ZXJsYXkoZXZlbnQpIHtcclxuICBwb3B1cEluc3RhbmNlcy5mb3JFYWNoKChwb3B1cEluc3RhbmNlKSA9PiB7XHJcbiAgICBjb25zdCBtb2RhbEVsZW1lbnQgPSBwb3B1cEluc3RhbmNlLnBvcHVwRWxlbWVudDtcclxuXHJcbiAgICBjb25zdCBjb250ZW50Q29udGFpbmVyID0gbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtbW9kYWwtY29udGFpbmVyXCIpO1xyXG5cclxuICAgIGlmIChtb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgIGlmICghY29udGVudENvbnRhaW5lci5jb250YWlucyhldmVudC50YXJnZXQpKSB7XHJcbiAgICAgICAgcG9wdXBJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBIYW5kbGVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGUpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCBjYXJkc0RhdGEgPSB7XHJcbiAgICBuYW1lOiBjYXJkVGl0bGVJbnB1dC52YWx1ZSxcclxuICAgIGxpbms6IGNhcmRMaW5rSW5wdXQudmFsdWUsXHJcbiAgfTtcclxuXHJcbiAgY3JlYXRlQ2FyZChjYXJkc0RhdGEpO1xyXG5cclxuICBjYXJkVGl0bGVJbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgY2FyZExpbmtJbnB1dC52YWx1ZSA9IFwiXCI7XHJcblxyXG4gIGFkZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xyXG5cclxuICBuZXdDYXJkUG9wdXAuY2xvc2UoY2FyZEFkZE1vZGFsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkc0RhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGdlbmVyYXRlQ2FyZChjYXJkc0RhdGEpO1xyXG4gIGNhcmRMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUNhcmQoY2FyZHNEYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgY2FyZHNEYXRhLFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZU92ZXJsYXlcclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufVxyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbi8qIGFkZCBwcm9maWxlIGVkaXQgYnV0dG9uICovXHJcblxyXG5wcm9maWxlQWRkRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICAgIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xyXG4gIH0sIDEwKTtcclxufSk7XHJcblxyXG4vKiBSZW1vdmUgcHJvZmlsZSBlZGl0IGJ1dHRvbiAqL1xyXG5cclxucHJvZmlsZUNsb3NlTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKHByb2ZpbGVFZGl0TW9kYWwpO1xyXG59KTtcclxuXHJcbi8qIGVkaXQgc3VibWl0ICovXHJcblxyXG5wcm9maWxlRWRpdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCk7XHJcblxyXG4vKiBhZGQgc3VibWl0ICovXHJcblxyXG5hZGRDYXJkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xyXG5cclxuLyogYWRkIG5ldyBjYXJkIGJ1dHRvbiAqL1xyXG5cclxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxuICB9LCAxMCk7XHJcbn0pO1xyXG5cclxuLyogcmVtb3ZlIG5ldyBjYXJkIGJ1dHRvbiAqL1xyXG5cclxuY2FyZENsb3NlTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKGNhcmRBZGRNb2RhbClcclxuKTtcclxuXHJcbi8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSwgaGFuZGxlT3ZlcmxheSwgcmVtb3ZlTGlzdGVuZXJzKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSwgaGFuZGxlT3ZlcmxheSwgcmVtb3ZlTGlzdGVuZXJzKTtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlT3ZlcmxheSA9IGhhbmRsZU92ZXJsYXk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIC8vIHNldCB0aGUgaW1hZ2UncyBzcmMgYW5kIGFsdFxyXG4gICAgY29uc3QgaW1hZ2VTcmMgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnNyYztcclxuICAgIGNvbnN0IGltYWdlQWx0ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5hbHQ7XHJcblxyXG4gICAgLy8gc2V0IHRoZSBjYXB0aW9uJ3MgdGV4dENvbnRlbnRcclxuICAgIGNvbnN0IGltYWdlQ2FwdGlvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IuYWx0O1xyXG5cclxuICAgIHN1cGVyLm9wZW4odGhpcy5fcG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL1BvcHVwV2l0aEZvcm1cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIGV4dGVuZHMgUG9wdXBXaXRoRm9ybSB7XHJcbiAgY29uc3RydWN0b3IoaW5mb1NlbGVjdG9yLCBzZXRVc2VySW5mbywgZWRpdFByb2ZpbGVQb3B1cCwgcG9wdXBJbnN0YW5jZXMpIHtcclxuICAgIHN1cGVyKGluZm9TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbmZvU2VsZWN0b3IgPSBpbmZvU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zZXRVc2VySW5mbyA9IHNldFVzZXJJbmZvO1xyXG4gICAgdGhpcy5fZWRpdFByb2ZpbGVQb3B1cCA9IGVkaXRQcm9maWxlUG9wdXA7XHJcbiAgICB0aGlzLl9wb3B1cEluc3RhbmNlcyA9IHBvcHVwSW5zdGFuY2VzO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAvLyByZXR1cm5zIG9iamVjdCBjb250YWluaW5nIGluZm8gYWJvdXQgdXNlclxyXG4gICAgLy8gU2V0IHRoZSBpbnB1dCBmaWVsZHMnIHZhbHVlcyB0byB0aGUgY3VycmVudCBwcm9maWxlIGluZm9ybWF0aW9uXHJcbiAgICB0aGlzLl9pbmZvU2VsZWN0b3IucHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPVxyXG4gICAgICB0aGlzLl9pbmZvU2VsZWN0b3IucHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5faW5mb1NlbGVjdG9yLnByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID1cclxuICAgICAgdGhpcy5faW5mb1NlbGVjdG9yLnByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcclxuXHJcbiAgICAvKiBjb25zb2xlLmxvZyh0aGlzLl9lZGl0UHJvZmlsZVBvcHVwKTtcclxuICAgICAqL1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdGl0bGU6IHRoaXMuX2luZm9TZWxlY3Rvci5wcm9maWxlVGl0bGUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9pbmZvU2VsZWN0b3IucHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIC8vIHRha2UgbmV3IHVzZXIgZGF0YSBhZGQgaXQgdG8gcGFnZVxyXG4gICAgdGhpcy5faW5mb1NlbGVjdG9yLnByb2ZpbGVUaXRsZS50ZXh0Q29udGVudCA9XHJcbiAgICAgIHRoaXMuX2luZm9TZWxlY3Rvci5wcm9maWxlVGl0bGVJbnB1dC52YWx1ZTtcclxuICAgIHRoaXMuX2luZm9TZWxlY3Rvci5wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9pbmZvU2VsZWN0b3IucHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWU7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBJbnN0YW5jZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICBpZiAoZWxlbWVudC5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgICAgLy9cclxuICAgICAgICBlbGVtZW50LmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiZ2V0VmlldyIsIl9jYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZEltYWdlRWxlbWVudCIsIl9jYXJkVGl0bGVFbCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJzdWJtaXRCdXR0b24iLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiZXZlcnkiLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJ2YWx1ZSIsIlBvcHVwIiwiaGFuZGxlT3ZlcmxheSIsInJlbW92ZUxpc3RlbmVycyIsImVkaXRQcm9maWxlUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwicG9wdXBFbGVtZW50IiwiX2hhbmRsZU92ZXJsYXkiLCJfcmVtb3ZlTGlzdGVuZXJzIiwiX2VkaXRQcm9maWxlUG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZU92ZXJsYXlDbGljayIsInNldEV2ZW50TGlzdGVuZXJzIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5IiwiUG9wdXBXaXRoRm9ybSIsInN1cGVyIiwiX3BvcHVwRm9ybSIsInJlc2V0IiwicHJvZmlsZUFkZEVkaXRCdXR0b24iLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZUNsb3NlTW9kYWxCdXR0b24iLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRGb3JtIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImNhcmRBZGRNb2RhbCIsImNhcmRDbG9zZU1vZGFsIiwiYWRkQ2FyZEZvcm0iLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJjYXJkVGl0bGVJbnB1dCIsImNhcmRMaW5rSW5wdXQiLCJwb3B1cEltYWdlTW9kYWwiLCJjYXJkTGlzdCIsIm1vZGFsSW1hZ2VFbGVtZW50IiwicG9wdXBJbWFnZUNhcHRpb24iLCJmb3JtU2VsZWN0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiaW1hZ2VQb3B1cCIsIl9wb3B1cFNlbGVjdG9yIiwiZGF0YSIsIm5ld0NhcmRQb3B1cCIsImluZm9TZWxlY3RvciIsInBvcHVwSW5zdGFuY2VzIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsIl9pbmZvU2VsZWN0b3IiLCJfc2V0VXNlckluZm8iLCJfcG9wdXBJbnN0YW5jZXMiLCJnZXRVc2VySW5mbyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJlbGVtZW50IiwiY29udGFpbnMiLCJzZXRUaW1lb3V0IiwicG9wdXBJbnN0YW5jZSIsIm1vZGFsRWxlbWVudCIsImNvbnRlbnRDb250YWluZXIiLCJ0YXJnZXQiLCJzdG9wUHJvcGFnYXRpb24iLCJjcmVhdGVDYXJkIiwiY2FyZHNEYXRhIiwiY2FyZEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJwcmVwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==