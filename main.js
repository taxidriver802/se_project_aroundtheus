!function(){"use strict";class e{constructor(e,t,n,o){let{name:i,link:r}=e;this._name=i,this._link=r,this._cardSelector=t,this._handleImageClick=n,this.domElements=o}getView(){const e=document.querySelector(this._cardSelector);return this._cardElement=e.content.querySelector(".card").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._cardElement}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}}const t=document.querySelector("#profile-edit-button"),n=document.querySelector("#profile-edit-modal"),o=document.querySelector("#profile-close-modal-button"),i=document.querySelector("#add-card-form"),r=document.querySelector(".profile__title"),s=document.querySelector(".profile__description"),l=document.querySelector("#profile-title-input"),a=document.querySelector("#profile-description-input"),c=n.querySelector(".modal__form"),d=document.querySelector(".profile__add-button"),m=document.querySelector("#card-add-modal"),u=m.querySelector(".modal__form"),p=document.querySelector("#popup-image"),_=document.querySelector(".modal__image"),h=document.querySelector(".modal__caption"),E=u.querySelector(".modal__input_type_title"),f=u.querySelector(".modal__input_type_link"),S={profileAddEditButton:t,profileEditModal:n,profileCloseModalButton:o,profileTitle:r,profileDescription:s,profileTitleInput:l,profileDescriptionInput:a,profileEditForm:c,addNewCardButton:d,cardAddModal:m,addCardFormElement:u,popupImageModal:p,modalImageElement:_,popupImageCaption:h,addCardForm:i,cardTitleInput:E,cardLinkInput:f},v={profileTitle:S.profileTitle,profileDescription:S.profileDescription,profileTitleInput:S.profileTitleInput,profileDescriptionInput:S.profileDescriptionInput};window.domElements=S;var y={initialCards:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],config:{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit",inactiveButtonClass:"modal__submit_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},selectors:{cardSection:".cards__list",cardTemplate:".card-template"},domElements:S,infoSelector:v};class C{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_toggleButtonState(e){const t=this._formElement.querySelector(this._submitButtonSelector);this._hasInvalidInput(e)?this.disableButton():(t.classList.remove(this._inactiveButtonClass),t.disabled=!1)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputEls)}))}))}disableButton(){const e=this._formElement.querySelector(this._submitButtonSelector);this._formElement.addEventListener("submit",(()=>{e.classList.add(this._inactiveButtonClass),e.disabled=!0}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e),e.value=""})),this.disableButton()}}class g{constructor(e){let{popupSelector:t}=e;this.popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._handleOverlayClick=this._handleOverlayClick.bind(this),this._handleCloseClick=()=>this.close()}setEventListeners(){this.popupElement.querySelector(".modal__close").addEventListener("click",this._handleCloseClick)}open(){this.popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("click",this._handleOverlayClick)}close(){this.popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._handleOverlayClick)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlayClick(e){e.target.classList.contains("modal_opened")&&this.close()}}class k extends g{constructor(e,t){let{popupSelector:n}=e;super({popupSelector:n}),this._handleFormSubmit=t,this._form=this.popupElement.querySelector(".modal__form"),this._getInputValues=this._getInputValues.bind(this)}setEventListeners(){super.setEventListeners(),this.popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}_getInputValues(){const e=Array.from(this.popupElement.querySelectorAll(".modal__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}}const{domElements:I,initialCards:L,selectors:b,config:q}=y,w=new class{constructor(e,t,n,o){let{items:i,renderer:r}=e;this._items=i,this._renderer=r,this._container=document.querySelector(t),this.domElements=n,this.generateCard=o}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:L,renderer:e=>{const t=z(e);w.addItem(t)}},b.cardSection,I,z),B=new C(q,I.addCardFormElement),j=new C(q,I.profileEditForm),V=new class extends g{constructor(e,t){let{popupSelector:n}=e;super({popupSelector:n}),this._domElements=t}open(e){let{name:t,link:n}=e;const o=this._domElements.modalImageElement,i=this._domElements.popupImageCaption;o.src=n,o.alt=t,i.textContent=t,super.open()}}({popupSelector:"#popup-image"},I),T=new k({popupSelector:"#card-add-modal"},(function(e){let{name:t,description:n}=e;const o=z({name:t,link:n});w.addItem(o),T.close(),setTimeout((()=>{I.addCardFormElement.reset()}),1)}),I,q),D=new k({popupSelector:"#profile-edit-modal"},(e=>{let{name:t,description:n}=e;x.setUserInfo(t,n),D.close()}),I,q),x=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t)}getUserInfo(){return{title:this._nameElement.textContent,description:this._jobElement.textContent}}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}(".profile__title",".profile__description");B.enableValidation(),j.enableValidation();const F=e=>{let{name:t,link:n}=e;V.open({name:t,link:n})};function z(t){return new e(t,"#card-template",F,I).getView()}w.renderItems(),I.profileAddEditButton.addEventListener("click",(()=>{const e=x.getUserInfo();I.profileTitleInput.value=e.title,I.profileDescriptionInput.value=e.description,D.open()})),I.addNewCardButton.addEventListener("click",(()=>{T.open()})),T.setEventListeners(),D.setEventListeners(),V.setEventListeners()}();
//# sourceMappingURL=main.js.map